@import '../base/_partials';

$calendar-border-radius: $border-radius;
#{$name-calendar-module} {
    position: relative;
    display: inline-flex;
    flex-direction: column;
    
    .#{&} {
        @extend #{$name-calendar-module};
        position: absolute;
        user-select: none;
        overflow: hidden;
        min-width: 300px;
        max-width: 350px;
        max-height: 0;
        top: 100%;
        left: 0;
        z-index: layer(index-2);
        transition: max-height .2s ease;
        box-shadow: 0 10px 40px -10px rgba($black, $opacity-shadow);
        background-color: $cloud;
        &.is-visible {
            max-height: 100vh;
        }
        * {
            font-size: $text-small;
        }

        &-input {
            min-width: 300px;
            color: lighten($dark, 10);
        }
        &-toggle {
            cursor: pointer;
            transition: all .2s ease-out;
            &:hover {
                color: $black;
            }
        }

        &-controls,
        &-grid-days,
        &-controls-month,
        &-controls-year,
        &-label {
            display: flex;
        }
        &-controls {
            padding: rem($text-default);
            align-items: center;
            text-transform: $text-upper;
            &-month,
            &-year {
                flex-direction: column;
                justify-content: center;
                align-items: center;
                span {
                    text-align: center;
                }
            }
            &-label {
                font-size: $text-large;
                overflow: hidden;
                word-break: no-all;
                text-overflow: ellipsis;
            }

            &-item {
                padding: 0.15rem rem($text-default);
                border-radius: $calendar-border-radius;
                cursor: pointer;
                transition: all .2s ease;
                &:hover {
                    background-color: rgba($black, $opacity-shadow);
                }
            }
        }

        &-controls,
        &-grid-days,
        &-label {
            align-items: center;
            justify-content: space-between;
        }
        
        &-label {
            justify-content: center;
            font-size: rem($text-default * 5);
            line-height: 1;
            padding: 0 rem($text-default);
        }

        &-grid {
            padding: rem($text-default) 0;
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            justify-items: center;
            align-items: center;

            &-days {
                padding-bottom: rem($text-default / 2);
                text-transform: $text-upper;
                font-weight: $text-bold;
                opacity: 0.6;
                color: $dark;
            }

            &-button {
                margin-top: rem($text-default / 4);
                max-width: 2rem;
                max-height: 2rem;
                width: 2rem;
                height: 2rem;
                &[disabled] {
                    opacity: $opacity-shadow * 3;
                }
            }
        }
    }

    @each $class,
    $color in $colors {
        &.is-#{$class} .calendar-controls,
        &.is-#{$class} .is-active {
            background-color: $color;
            @if $class=='warning' or $class=='cloud' or $class=='light' {
                color: $dark;
            }@else {
                color: $cloud;
            }
        }
    }

    @include until(touch) {
        & {
            position: initial;
            .#{&}.is-visible {
                max-width: 100%;
                width: 100%;
                position: fixed;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                box-shadow: 0 10px 500000em 10000em rgba($black, $opacity-shadow * 2);
            }
        }
    }
}